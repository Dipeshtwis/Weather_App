(()=>{"use strict";const e=document.querySelector("[data-new-form]"),t=document.querySelector("[data-new-city-input]"),n=document.getElementById("container"),a=document.getElementById("temp-template"),i=document.createElement("div"),c=document.createElement("h1"),d=document.createElement("p"),r=document.createElement("p"),m=document.createElement("p"),o=document.createElement("span"),s=async e=>{(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})(n);const t=await(async e=>{try{const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${config.apiKey}`),n=await t.json();return console.log(n),n}catch(e){return e}})(e);if(200===t.cod){const e=document.importNode(a.content,!0);n.appendChild(e),c.innerText=`Location: ${t.name}, ${t.sys.country}`,d.innerText="Weather type: "+t.weather[0].description,r.innerText="Temperature: "+t.main.temp/10,m.innerText=`Humidity: ${t.main.humidity} %`,r.appendChild(o),o.innerText=" ℃";const s=document.getElementById("mainSwitch");s.innerText="convert in ℉";const l=t.main.temp;s.addEventListener("click",(e=>{e.preventDefault(),s.innerText="convert in "+o.innerText;const t=((e,t)=>{let n=null;return" ℃"===t?(n=(1.8*e+32).toFixed(2),t=" ℉"):(n=(5/9*(e-32)).toFixed(2),t=" ℃"),{temp:n,type:t}})(l,o.innerText);o.innerText=""+t.type,r.innerText="Temperature: "+t.temp,r.appendChild(o)})),d.classList.add("city-name"),r.classList.add("city-name"),m.classList.add("city-name"),"Rain"===t.weather[0].main?document.body.className="rainy":"Haze"===t.weather[0].main?document.body.className="hazy":"Clouds"===t.weather[0].main?document.body.className="cloudy":document.body.className="clear",i.appendChild(c),i.appendChild(d),i.appendChild(r),n.appendChild(i)}else document.body.className="error-pic",n.innerHTML=t.message,n.classList.add("city-name")};e.addEventListener("submit",(n=>{n.preventDefault();const a=t.value;null!=a&&""!==a&&(s(a),e.reset())}))})();